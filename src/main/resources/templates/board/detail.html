<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>[[${board.getBrd_title()}]]</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <div th:replace="fragment/common :: css"></div>

</head>
<body data-spy="scroll" data-target=".site-navbar-target" data-offset="300">

<div class="site-wrap">

    <div class="site-mobile-menu site-navbar-target">
        <div class="site-mobile-menu-header">
            <div class="site-mobile-menu-close mt-3">
                <span class="icon-close2 js-menu-toggle"></span>
            </div>
        </div>
        <div class="site-mobile-menu-body"></div>
    </div>

    <div th:replace="fragment/common :: header"></div>

    <div class="site-blocks-cover overlay" style="background-image: url(images/hero_1.jpg);" data-aos="fade">
        <div class="container">
            <div class="row align-items-center justify-content-center">

                <input type="hidden" id="brd_id" th:value="${board.getBrd_id()}">
                <div class="col-md-6 mt-lg-5 text-center">
                    <h3>
                        <th:block th:switch="${board.brd_category}">
                            <th:block th:case="0">Notice</th:block>
                            <th:block th:case="1">Develop</th:block>
                            <th:block th:case="2">Everything</th:block>
                            <th:block th:case="3">Anonymous Board</th:block>
                        </th:block>
                    </h3>
                    <br><br>
                    <h1>[[${board.getBrd_title()}]]</h1><br>
                    <p class="post-meta"><strong>[[${#temporals.format(board.getCreatedDate(), 'MM dd, yyyy  h:mm a')}]]</strong>
                        <strong th:if="${board.modifiedDate != board.createdDate}"><th:block th:if="${board.modifiedDate != null}">
                            &nbsp;&nbsp;->&nbsp;&nbsp; [[${#temporals.format(board.getModifiedDate(), 'MM dd, yyyy  h:mm a')}]]</th:block></strong><br>
                        Posted by <strong>[[${board.getMem_nickname()}]]</strong></p>
                    <p>[[${board.brd_cnt}]] View</p>

                </div>

            </div>
        </div>
        <a href="#content-section" class="smoothscroll arrow-down"><span class="icon-arrow_downward"></span></a>
    </div>



    <section class="site-section" id="content-section">
        <div class="container">
            <div class="row">
                <div class="col-md-8 blog-content">
                    <input type="hidden" id="tag_content" th:value="${board.getBrd_content()}" >
                    <div id="content" class="lead" style="min-height: 500px"></div>

                    <div class="pt-5">
                        <input type="button" onclick="location.href='/board/'" class="btn btn-sm" value="Board List" >&nbsp;&nbsp;
                        <p th:if="${session['ses_id'] == board.getMem_id()}">
                            <input type="button" id="btn-update-form" class="btn btn-primary btn-sm" value="Board Update">&nbsp;&nbsp;
                            <input type="button" id="btn-delete" class="btn btn-sm" value="Board Delete">
                        </p>
                    </div>


                    <div class="pt-5">
                        <h3 class="mb-5">Reply [ <strong th:text="${replyList.size()}"></strong> ]</h3>
                        <ul class="comment-list" th:if="${replyList.size() == 0}">
                            <h2>댓글이 없습니다.</h2>
                        </ul>
                        <ul class="comment-list" th:unless="${replyList.size() == 0}">
                            <li class="comment" th:each="reply: ${replyList}">
<!--                                <div class="vcard bio">-->
<!--                                    <img src="images/person_1.jpg" alt="Image placeholder">-->
<!--                                </div>-->
                                <div class="comment-body">
                                    <h3>[[${reply.getRep_nickname()}]]</h3>
                                    <div class="meta">[[${#temporals.format(reply.getCreatedDate(), 'MM dd, yyyy  h:mm a')}]]</div><br>
                                    <div class="meta" th:if="${reply.modifiedDate != reply.createdDate}"><th:block th:if="${reply.modifiedDate != null}">
                                        -> [[${#temporals.format(reply.getModifiedDate(), 'MM dd, yyyy  h:mm a')}]]</th:block></div>
                                    <p>[[${reply.getRep_content()}]]</p>
                                    <p><a href="#" class="reply">Reply</a></p>
                                    <p th:if="${session['ses_id'] == reply.getRep_id()}">
                                        <a href="javascript:rep_update()" class="reply">Reply Update</a> &nbsp;&nbsp;
                                        <a href="javascript:rep_delete()" class="reply">Reply Delete</a>
                                    </p>
                                </div>
                            </li>

<!--                            <li class="comment">-->
<!--                                <div class="vcard bio">-->
<!--                                    <img src="images/person_1.jpg" alt="Image placeholder">-->
<!--                                </div>-->
<!--                                <div class="comment-body">-->
<!--                                    <h3>Jean Doe</h3>-->
<!--                                    <div class="meta">January 9, 2018 at 2:21pm</div>-->
<!--                                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Pariatur quidem laborum necessitatibus, ipsam impedit vitae autem, eum officia, fugiat saepe enim sapiente iste iure! Quam voluptas earum impedit necessitatibus, nihil?</p>-->
<!--                                    <p><a href="#" class="reply">Reply</a></p>-->
<!--                                </div>-->

<!--                                <ul class="children">-->
<!--                                    <li class="comment">-->
<!--                                        <div class="vcard bio">-->
<!--                                            <img src="images/person_1.jpg" alt="Image placeholder">-->
<!--                                        </div>-->
<!--                                        <div class="comment-body">-->
<!--                                            <h3>Jean Doe</h3>-->
<!--                                            <div class="meta">January 9, 2018 at 2:21pm</div>-->
<!--                                            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Pariatur quidem laborum necessitatibus, ipsam impedit vitae autem, eum officia, fugiat saepe enim sapiente iste iure! Quam voluptas earum impedit necessitatibus, nihil?</p>-->
<!--                                            <p><a href="#" class="reply">Reply</a></p>-->
<!--                                        </div>-->


<!--                                        <ul class="children">-->
<!--                                            <li class="comment">-->
<!--                                                <div class="vcard bio">-->
<!--                                                    <img src="images/person_1.jpg" alt="Image placeholder">-->
<!--                                                </div>-->
<!--                                                <div class="comment-body">-->
<!--                                                    <h3>Jean Doe</h3>-->
<!--                                                    <div class="meta">January 9, 2018 at 2:21pm</div>-->
<!--                                                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Pariatur quidem laborum necessitatibus, ipsam impedit vitae autem, eum officia, fugiat saepe enim sapiente iste iure! Quam voluptas earum impedit necessitatibus, nihil?</p>-->
<!--                                                    <p><a href="#" class="reply">Reply</a></p>-->
<!--                                                </div>-->

<!--                                                <ul class="children">-->
<!--                                                    <li class="comment">-->
<!--                                                        <div class="vcard bio">-->
<!--                                                            <img src="images/person_1.jpg" alt="Image placeholder">-->
<!--                                                        </div>-->
<!--                                                        <div class="comment-body">-->
<!--                                                            <h3>Jean Doe</h3>-->
<!--                                                            <div class="meta">January 9, 2018 at 2:21pm</div>-->
<!--                                                            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Pariatur quidem laborum necessitatibus, ipsam impedit vitae autem, eum officia, fugiat saepe enim sapiente iste iure! Quam voluptas earum impedit necessitatibus, nihil?</p>-->
<!--                                                            <p><a href="#" class="reply">Reply</a></p>-->
<!--                                                        </div>-->
<!--                                                    </li>-->
<!--                                                </ul>-->
<!--                                            </li>-->
<!--                                        </ul>-->
<!--                                    </li>-->
<!--                                </ul>-->
<!--                            </li>-->

<!--                            <li class="comment">-->
<!--                                <div class="vcard bio">-->
<!--                                    <img src="images/person_1.jpg" alt="Image placeholder">-->
<!--                                </div>-->
<!--                                <div class="comment-body">-->
<!--                                    <h3>Jean Doe</h3>-->
<!--                                    <div class="meta">January 9, 2018 at 2:21pm</div>-->
<!--                                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Pariatur quidem laborum necessitatibus, ipsam impedit vitae autem, eum officia, fugiat saepe enim sapiente iste iure! Quam voluptas earum impedit necessitatibus, nihil?</p>-->
<!--                                    <p><a href="#" class="reply">Reply</a></p>-->
<!--                                </div>-->
<!--                            </li>-->
                        </ul>
                        <!-- END comment-list -->

                        <div class="comment-form-wrap pt-5">
                            <h3 class="mb-5">Reply Write</h3>
                            <form class="p-5 bg-light" th:if="${member == null}">
                                <blockquote class="mb-5">
                                    <p>로그인 후 댓글을 작성해주세요!</p>
                                    <input type="button" value="Sign In" class="btn btn-primary" onclick="location.href='/member/sign_in'">
                                </blockquote>
                            </form>
                            <form class="p-5 bg-light" th:unless="${member == null}">
                                <div class="form-group">
                                    <label for="nickname">Nickname *</label>
                                    <input type="text" class="form-control" id="nickname" th:value="${member.getMem_nickname()}" readonly>
                                </div>
                                <div class="form-group">
                                    <input type="hidden" id="mem_pw" th:value="${member.getMem_password()}">
                                    <label for="password">Password *</label>
                                    <input type="password" class="form-control" id="password" required>
                                    <div id="pw_ch"></div>
                                    <input type="hidden" id="pw_bool" value="false">
                                </div>

                                <div class="form-group">
                                    <label for="rep_content">Content *</label>
                                    <textarea id="rep_content" cols="30" rows="10" class="form-control" required></textarea>
                                </div>
                                <div class="form-group">
                                    <input type="button" value="save" class="btn btn-primary" id="btn_rep_save">
                                </div>

                            </form>
                        </div>
                    </div>

                </div>

            </div>
        </div>
    </section>

    <div th:replace="fragment/common :: footer"></div>

</div> <!-- .site-wrap -->
<div th:replace="fragment/common :: script"></div>

<script type="text/javascript" src="/js/app/board.js"></script>
<script type="text/javascript" src="/js/app/reply.js"></script>

<script>
    var content = $('#tag_content').val();
    $(function () {
        $('#content').append(content);
    })

    var pwCh = $('#mem_pw').val();
    $('#password').blur(function () {
        if($('#password').val() == pwCh) {
            console.log('true');
            $('#pw_ch').text('비밀번호 일치 확인되었습니다.');
            $('#pw_ch').css('color', 'black');
        } else {
            console.log('false');
            $('#pw_ch').text('비밀번호가 일치하지 않습니다.');
            $('#pw_ch').css('color', 'red');
        }
        $('#pw_bool').attr('value', check);
    });

    $('#btn-update-form').on('click', function () {
        window.location.href='/board/update?brd_id=' + $('#brd_id').val();
    })
</script>

</body>
</html>